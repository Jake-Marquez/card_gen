<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Generator</title>
  <script type="module" crossorigin src="./assets/index-91m2j72e.js"></script>
  <link rel="stylesheet" crossorigin href="./assets/index--aHNGspD.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Playing Card Generator</h1>
            <p>Create printable card templates for your custom card game</p>
            <a href="https://drive.google.com/drive/folders/1QCpshu2c7FomIn1edkFd71B0JX-Myx05?usp=sharing" target="_blank" class="gdrive-btn">
                <svg class="gdrive-icon" viewBox="0 0 87.3 78" xmlns="http://www.w3.org/2000/svg">
                    <path d="m6.6 66.85 3.85 6.65c.8 1.4 1.95 2.5 3.3 3.3l13.75-23.8h-27.5c0 1.55.4 3.1 1.2 4.5z" fill="#0066da"/>
                    <path d="m43.65 25-13.75-23.8c-1.35.8-2.5 1.9-3.3 3.3l-25.4 44a9.06 9.06 0 0 0 -1.2 4.5h27.5z" fill="#00ac47"/>
                    <path d="m73.55 76.8c1.35-.8 2.5-1.9 3.3-3.3l1.6-2.75 7.65-13.25c.8-1.4 1.2-2.95 1.2-4.5h-27.502l5.852 11.5z" fill="#ea4335"/>
                    <path d="m43.65 25 13.75-23.8c-1.35-.8-2.9-1.2-4.5-1.2h-18.5c-1.6 0-3.15.45-4.5 1.2z" fill="#00832d"/>
                    <path d="m59.8 53h-32.3l-13.75 23.8c1.35.8 2.9 1.2 4.5 1.2h50.8c1.6 0 3.15-.45 4.5-1.2z" fill="#2684fc"/>
                    <path d="m73.4 26.5-12.7-22c-.8-1.4-1.95-2.5-3.3-3.3l-13.75 23.8 16.15 28h27.45c0-1.55-.4-3.1-1.2-4.5z" fill="#ffba00"/>
                </svg>
                Open Google Drive for existing spreadsheets
            </a>
        </header>

        <div class="upload-section">
            <div class="upload-group">
                <label>
                    <h3>1a. Use Google Sheets</h3>
                    <p>Sign in with Google to select a spreadsheet from your account</p>
                </label>
                <button id="google-signin-btn" class="google-btn" disabled>
                    <svg class="google-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                        <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                        <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
                        <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                    </svg>
                    <span id="google-signin-text">Loading Google Sign-In...</span>
                </button>
                <div id="google-sheets-container" style="display: none;">
                    <div style="margin: 10px 0;">
                        <span id="user-email" style="font-size: 14px; color: #666;"></span>
                        <button id="google-signout-btn" style="margin-left: 10px; padding: 5px 10px; font-size: 12px;">Sign Out</button>
                    </div>
                    <select id="sheets-select" style="width: 100%; padding: 10px; margin: 10px 0; border: 2px solid #ddd; border-radius: 4px;">
                        <option value="">Select a spreadsheet...</option>
                    </select>
                    <button id="load-sheet-btn" disabled style="margin-top: 5px;">Load Selected Sheet</button>
                </div>
                <div id="google-status" class="status"></div>
            </div>

            <div class="upload-group" style="text-align: center; padding: 20px 0;">
                <span style="color: #999; font-size: 18px; font-weight: bold;">OR</span>
            </div>

            <div class="upload-group">
                <label for="csv-upload">
                    <h3>1b. Upload CSV File</h3>
                    <p>CSV should contain columns: name, troopCost, manaCost, playableOn, type, cardText, flavorText, power, toughness, range, image, artist</p>
                    <p>Download the Sample CSV + Photos, or try the test card designer below.</p>
                    <button id="download-elfs-btn" class="download-sample-btn" style="border: none; cursor: pointer; margin-top: 10px;">Download Sample CSV + Photos</button>
                </label>
                <input type="file" id="csv-upload" accept=".csv" />
                <div id="csv-status" class="status"></div>
            </div>

            <div class="upload-group">
                <label for="image-upload">
                    <h3>2. Upload Card Artwork</h3>
                    <p>Upload card artwork images referenced in your CSV</p>
                </label>
                <input type="file" id="image-upload" accept="image/*" multiple />
                <div id="image-status" class="status"></div>
            </div>

            <div class="upload-group">
                <button id="generate-btn" disabled>Generate PDF</button>
                <button id="preview-btn" disabled>Preview Cards</button>
            </div>
        </div>

        <div id="preview-section" class="preview-section" style="display: none;">
            <h3>Card Preview</h3>
            <div id="card-preview"></div>
        </div>

        <div class="test-card-section">
            <h3>Test Card Designer</h3>
            <p>Design a single card for testing without uploading a CSV</p>

            <div class="test-card-container">
                <div class="test-card-form">
                    <div class="form-row">
                        <label>Card Name:</label>
                        <input type="text" id="test-name" placeholder="Enter card name" value="Test Card">
                    </div>

                    <div class="form-row">
                        <label>Troop Cost:</label>
                        <input type="number" id="test-troopCost" placeholder="0" min="0">
                    </div>

                    <div class="form-row">
                        <label>Mana Cost:</label>
                        <input type="number" id="test-manaCost" placeholder="0" min="0">
                    </div>

                    <div class="form-row">
                        <label>Playable On:</label>
                        <input type="text" id="test-playableOn" placeholder="forest,plains,mountain">
                    </div>

                    <div class="form-row">
                        <label>Type:</label>
                        <input type="text" id="test-type" placeholder="Creature - Dragon">
                    </div>

                    <div class="form-row">
                        <label>Card Text:</label>
                        <textarea id="test-cardText" rows="3" placeholder="Enter card abilities and rules text"></textarea>
                    </div>

                    <div class="form-row">
                        <label>Flavor Text:</label>
                        <textarea id="test-flavorText" rows="2" placeholder="Enter flavor text (will be italic)"></textarea>
                    </div>

                    <div class="form-row">
                        <label>Power:</label>
                        <input type="number" id="test-power" placeholder="0" min="0">
                    </div>

                    <div class="form-row">
                        <label>Toughness:</label>
                        <input type="number" id="test-toughness" placeholder="0" min="0">
                    </div>

                    <div class="form-row">
                        <label>Range:</label>
                        <input type="number" id="test-range" placeholder="0" min="0">
                    </div>

                    <div class="form-row">
                        <label>Card Image:</label>
                        <input type="file" id="test-image" accept="image/*">
                    </div>

                    <div class="form-row">
                        <label>Artist:</label>
                        <input type="text" id="test-artist" placeholder="Artist name">
                    </div>

                    <button id="update-test-card-btn" class="update-btn">Update Preview</button>
                </div>

                <div class="test-card-preview">
                    <h4>Live Preview</h4>
                    <div id="test-card-display"></div>
                </div>
            </div>
        </div>

        <div id="print-area" style="display: none;"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://apis.google.com/js/api.js" onload="gapiLoaded()"></script>
    <script src="https://accounts.google.com/gsi/client" onload="gisLoaded()" async defer></script>
</body>
</html>
